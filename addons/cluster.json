{
  "jps": "https://raw.githubusercontent.com/DmytroZubelevych/postgres/master/addons/auto-cluster.yaml",
  "defaultState": false,
  "skipOnEnvInstall": true,
  "nodeGroupData": {
    "scalingMode": "STATELESS",
    "skipNodeEmails": true,
    "isRedeploySupport": true,
    "isResetServicePassword": "NODEGROUP"
  },
  "settings": {
    "data": {
      "is_pgpool2": true
    },
    "fields": [
      {
        "type": "toggle",
        "caption": "Pgpool2",
        "name": "is_pgpool2",
        "value": true
      }
    ]
  },
  "validation": {
    "minCount": 2,
    "minCloudlets": 4,
    "scalingMode": "STATELESS",
    "rules": [
      {
        "is_pgpool2": {
          "true": {
            "setGlobals": {
              "pgpool2Count": 1
            }
          }
        }
      }
    ]
  },
  "recommended": {
    "cloudlets": 32
  },
  "requires": [
    "proxysql"
  ],
  "extraNodes": {
    "nodeGroup": "proxy",
    "nodeType": "pgpool2",
    "flexibleCloudlets": 8,
    "fixedCloudlets": 1,
    "displayName": "Pgpool2",
    "count": "${globals.pgpool2Count:0}",
    "validation": {
       "minCount": 1,
       "maxCount": 3
    }
  },
  "description": "<h3>Primary-Secondary with Scalable Secondaries</h3>Pre-configured PostgreSQL database cluster with primary-secondary replication. New nodes are automatically added into the cluster as secondaries. <a href='https://jelastic.com/blog/postgresql-auto-clustering-master-slave-replication/'>Learn More</a><img width='217' height='168' src='https://raw.githubusercontent.com/jelastic/icons/master/postgres/jelastic/images/tip-cluster-ms.svg?sanitize=true'>"
}
